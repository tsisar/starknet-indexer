// Code generated by generator-core; DO NOT EDIT.
package {{.Package}}

import (
    "fmt"
    "github.com/NethermindEth/juno/core/felt"
    "github.com/Tsisar/starknet-indexer/internal/types"
)

{{- range .Events}}
{{- if eq .Kind "struct"}}

func Decode{{.StructName}}(keys, data []*felt.Felt) (interface{}, error) {
    {{- if .KeyFields}}
    if len(keys) != {{countFields .KeyFields}} {
        return nil, fmt.Errorf("expected {{countFields .KeyFields}} keys, got %d", len(keys))
    }
    {{- end}}
    {{- if .DataFields}}
    if len(data) != {{countFields .DataFields}} {
        return nil, fmt.Errorf("expected {{countFields .DataFields}} data fields, got %d", len(data))
    }
    {{- end}}

    return {{.StructName}}{
    {{- if .KeyFields}}
        Key: {{.StructName}}Key{
{{- range .KeyFields}}
{{assign "keys" . -}}
{{- end}}
        },
    {{- end}}
    {{- if .DataFields}}
        Data: {{.StructName}}Data{
{{- range .DataFields}}
{{assign "data" . -}}
{{- end}}
        },
    {{- end}}
    }, nil
}

{{- end}}
{{- end}}

var Decoders = map[string]types.EventDecoderWithMeta{
{{- range .Events}}
{{- if eq .Kind "struct"}}
    "{{.Selector}}": {Func: Decode{{.StructName}}, Name: "{{.Name}}"},
{{- end}}
{{- end}}
}